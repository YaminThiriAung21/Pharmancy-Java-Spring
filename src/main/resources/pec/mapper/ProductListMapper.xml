<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pec.mapper.ProductListMapper">
	<select id="getProductList" resultType="pec.dto.ProductDetailDto">
		select * from product_info where delete_flag = 0 and office_info_id = #{office_id}
	</select>
	
	<select id="searchProductByName" resultType="pec.dto.ProductDetailDto">
  		<!-- select * from product_info where product_name like '%'||#{product_name}||'%' -->
  		select * from product_info where LOWER(product_name) LIKE LOWER(#{product_name}||'%') and delete_flag = 0 and office_info_id = #{office_id}
	</select>
	
	<select id="getCategoryList" resultType="pec.dto.ProductDetailDto"> 
	select category_info.category_name,product_info.category_info_id from product_info,category_info where product_info.category_info_id = category_info.category_info_id and office_info_id = #{office_id} and product_info.delete_flag=0 group by product_info.category_info_id,category_info.category_name
	</select>
	
	<select id="getMedicineTypeList" resultType="pec.dto.ProductDetailDto">
	 select medicine_info.medicine_type,product_info.medicine_info_id from product_info,medicine_info where product_info.medicine_info_id = medicine_info.medicine_info_id and office_info_id = #{office_id} and product_info.delete_flag=0 group by product_info.medicine_info_id,medicine_info.medicine_type
	</select>
	
	<select id="getMedicineNameList" resultType="pec.dto.ProductDetailDto">
	 select * from product_info where delete_flag = 0 and office_info_id = #{office_id} order by product_name 
	 </select>
	 
	 <select id="searchProductByMedicineType" resultType="pec.dto.ProductDetailDto">
	 select * from product_info where medicine_info_id = #{medicine_info_id} and delete_flag = 0 and office_info_id = #{office_id}
	 </select>
	
	
	<select id="searchProductByCategory" resultType="pec.dto.ProductDetailDto">
	 select * from product_info where category_info_id = #{category_info_id} and delete_flag = 0 and office_info_id = #{office_id}
	 </select>
	
</mapper>